{
  "title": "Address",
  "type": "object",
  "properties": {
    "country": {
      "type": "string",
      "title": "Country",
      "enum": ["CA", "US"]
    }
  },
  "required": ["country"],
  "oneOf": [
    {
      "title": "Canada",
      "properties": {
        "country": { "const": "CA" },
        "street": { "type": "string", "title": "Street address" },
        "city": { "type": "string", "title": "City" },
        "province": {
          "type": "string",
          "title": "Province",
          "enum": ["ON", "QC", "BC", "AB", "MB", "SK", "NS", "NB", "NL", "PE", "NT", "NU", "YT"]
        },
        "postalCode": { "type": "string", "title": "Postal Code", "pattern": "^[A-Za-z]\\d[A-Za-z][ -]?\\d[A-Za-z]\\d$" }
      },
      "required": ["street", "city", "province", "postalCode"]
    },
    {
      "title": "United States",
      "properties": {
        "country": { "const": "US" },
        "street": { "type": "string", "title": "Street address" },
        "city": { "type": "string", "title": "City" },
        "state": {
          "type": "string",
          "title": "State",
          "enum": ["AL","AK","AZ","AR","CA","CO","CT","DE","FL","GA","HI","IA","ID","IL","IN","KS","KY","LA","MA","MD","ME","MI","MN","MO","MS","MT","NC","ND","NE","NH","NJ","NM","NV","NY","OH","OK","OR","PA","RI","SC","SD","TN","TX","UT","VA","VT","WA","WI","WV","WY","DC"]
        },
        "zip": { "type": "string", "title": "ZIP Code", "pattern": "^\\d{5}(-\\d{4})?$" }
      },
      "required": ["street", "city", "state", "zip"]
    }
  ]
}
